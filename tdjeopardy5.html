<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Beatty Teachers In Jeopardy</title>
<style>
  :root{
    --navy:#000c53;
    --yellow:#ffe200;
    --ink:#00072a;
    --white:#ffffff;
    --red:#ff3b3b;
  }
  html,body{ margin:0; padding:0; height:100%; background:var(--ink); color:var(--white);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }

  /* Banner */
  .banner{ background:var(--navy); color:var(--yellow); text-align:center; padding:18px 12px;
    font-weight:900; letter-spacing:.5px; text-transform:uppercase; font-size:clamp(22px,3.6vw,44px);
    border-bottom:6px solid var(--yellow); }

  /* Top bar / scores */
  .topbar{ display:flex; flex-direction:column; align-items:center; gap:10px; padding:12px 14px;
    border-bottom:2px solid #001044; background:#000a3a; }
  .score{ display:flex; gap:18px; align-items:center; flex-wrap:wrap; justify-content:center; }
  .team{ background:#00114f; border:2px solid var(--yellow); border-radius:12px; padding:10px 14px; min-width:240px;
    display:flex; align-items:center; justify-content:space-between; box-shadow:0 0 0 3px rgba(255,226,0,.15) inset; }
  .team .name{ font-weight:800; color:var(--yellow); outline:none; }
  .team .name[contenteditable]:focus{ background:rgba(255,226,0,.12); border-radius:6px; padding:0 6px; }
  .team .points{ font-weight:900; font-size:33px; cursor:pointer; } /* +50% */
  .team .points:hover{ text-decoration:underline; }

  /* Board */
  .board-wrap{ padding:12px; max-width:1400px; margin:0 auto; }
  .board{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
  .cat{ background:var(--navy); color:var(--yellow); text-align:center; padding:12px 8px; font-weight:800;
    border:3px solid var(--yellow); border-radius:10px; min-height:70px; display:flex; align-items:center; justify-content:center;
    box-shadow:0 6px 0 #16226e; font-size:clamp(14px,1.6vw,20px); }
  .cell{ background:var(--yellow); color:var(--navy); border:3px solid #d3bc00; border-radius:12px; text-align:center;
    font-weight:900; font-size:clamp(22px,3vw,34px); padding:18px 10px; cursor:pointer; user-select:none; box-shadow:0 8px 0 #b6a100;
    transition:transform .06s ease, box-shadow .06s ease, opacity .2s ease; }
  .cell:hover{ transform:translateY(-2px); box-shadow:0 10px 0 #b6a100; }
  .cell.used{ opacity:.4; text-decoration:line-through; } /* still clickable (so you can re-open) */

  /* Modal */
  .modal{ position:fixed; inset:0; background:rgba(0,7,42,.72); display:none; align-items:center; justify-content:center; padding:20px; z-index:50; }
  .modal.show{ display:flex; }
  .card{ background:#00124f; border:3px solid var(--yellow); color:var(--white); border-radius:14px; max-width:920px; width:100%;
    box-shadow:0 16px 0 #00103e, 0 0 0 6px rgba(255,226,0,.15) inset; }
  .card-head{ display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; padding:14px 16px; gap:8px;
    border-bottom:2px solid #21306f; background:#000c53; }
  .badge{ background:var(--yellow); color:var(--navy); font-weight:900; padding:6px 10px; border-radius:999px; }
  .badge.points{ background:var(--red); color:var(--white); border:2px solid var(--yellow); }
  .card-body{ padding:18px; font-size:clamp(16px,1.5vw,22px); line-height:1.45; }
  .q{ font-size:clamp(18px,1.8vw,26px); font-weight:800; color:var(--yellow); margin-bottom:18px; }

  .media{ margin:10px 0; display:flex; justify-content:center; }
  .media img{ max-width:100%; height:auto; border-radius:10px; border:2px solid var(--yellow); background:#001860; }

  .options{ margin:12px 0 4px; }
  .opt{ display:flex; align-items:center; gap:10px; padding:6px 0; }
  .opt input{ transform:scale(1.2); }
  .opt .label{ line-height:1.35; }

  .ans{ margin-top:16px; padding:12px; background:#001860; border:2px dashed var(--yellow); border-radius:10px; display:none; }
  .ans.show{ display:block; }

  /* Buttons */
  .btn{ cursor:pointer; border:2px solid var(--yellow); background:var(--yellow); color:var(--navy); font-weight:900;
    border-radius:10px; padding:10px 14px; transition:transform .05s ease, filter .05s ease; user-select:none; }
  .btn:active{ transform:translateY(2px); filter:brightness(.95); }
  .btn[disabled]{ filter:grayscale(1) brightness(.85); cursor:not-allowed; }
  .btn-ghost{ background:transparent; color:var(--yellow); }
  .btn-close{ background:var(--ink); color:var(--white); border:2px solid var(--yellow); box-shadow:0 0 0 2px rgba(255,226,0,.12) inset; }

  /* Controls layout */
  .panel-controls{ display:grid; gap:16px; margin-top:22px; }
  .controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
  .controls-scoring{ border-top:1px solid #21306f; padding-top:14px; }

  /* Restart */
  .page-footer{ display:flex; justify-content:center; padding:16px 0 28px; }
  .restart{ background:var(--navy); color:var(--yellow); border:2px solid var(--yellow); font-weight:900; padding:10px 16px;
    border-radius:12px; box-shadow:0 6px 0 #00103e; }

  .cats-row{ position:sticky; top:0; z-index:10; }
</style>
</head>
<body>

<div class="banner">üêù BEATTY TEACHERS IN JEOPARDY üçé</div>

<div class="topbar">
  <div class="score">
    <div class="team" data-team="A">
      <div class="name" contenteditable="true" spellcheck="false">Team A</div>
      <div class="points" id="scoreA" title="Click to edit score">0</div>
    </div>
    <div class="team" data-team="B">
      <div class="name" contenteditable="true" spellcheck="false">Team B</div>
      <div class="points" id="scoreB" title="Click to edit score">0</div>
    </div>
  </div>
</div>

<div class="board-wrap">
  <div id="board" class="board"></div>
</div>

<div class="page-footer">
  <button id="restart" class="restart" title="Restart the whole game">Restart</button>
</div>

<!-- Modal -->
<div id="modal" class="modal" role="dialog" aria-modal="true">
  <div class="card">
    <div class="card-head">
      <div><span class="badge" id="mCat">Category</span></div>
      <div><span class="badge points">Points: <span id="mPts">0</span></span></div>
    </div>
    <div class="card-body">
      <div class="q" id="mQ">Question text</div>
      <div id="mMedia" class="media"></div>
      <div id="mOptions" class="options"></div>
      <div id="mAnswer" class="ans"></div>

      <div class="panel-controls">
        <div class="controls">
          <button class="btn" id="btnShowAns">Show Answer</button>
          <button class="btn btn-close" id="btnClose">Close</button>
        </div>
        <div class="controls controls-scoring">
          <span>Scoring:</span>
          <button class="btn" id="btnA">+ Team A</button>
          <button class="btn" id="btnB">+ Team B</button>
          <button class="btn btn-ghost" id="btnBoth" title="Give full points to both teams">+ Both Teams</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* =========================
   GAME DATA ‚Äî EDIT HERE
   ========================= */
const gameData = [
  {
    category: "üó£Ô∏è Yapping: lingo of the youth",
    questions: [
      { points: 400, type: "open",
        question: "Use the phrase ‚Äú<b>aura farming</b>‚Äù in a sentence.",
        answer: "Means doing things to harvest clout / image points. e.g., ‚ÄúHe films every charity act‚Äîjust <b>aura farming</b>.‚Äù"
      },
      { points: 300, type: "open",
        question: "Use the phrase ‚Äú<b>left no crumbs</b>‚Äù in a sentence.",
        answer: "Used to praise a performance that was flawless / next-level. e.g., ‚ÄúOur emcees <b>left no crumbs</b> on stage today.‚Äù"
      },
      { points: 200, type: "fill",
        question: "Short dialogue:<br>‚Äúwow his <u>____</u> is on fire.‚Äù<br>‚ÄúNo cap, that shirt is lit.‚Äù<br><span class='muted'>(Guess the blank.)</span>",
        answer: "Expected blank: <b>drip</b> (outfit). ‚ÄúNo cap‚Äù means ‚Äúno lie / for real.‚Äù"
      },
      { points: 100, type: "open",
        question: "üêê? Draw out the meaning of the following word/idea: <b>GOAT</b>",
        answer: "<b>GOAT</b> = <i>Greatest Of All Time</i>. Commonly used to praise someone at the top of their field."
      }
    ]
  },
  {
    category: "üè´ Bruh: Beattyians' Life",
    questions: [
      { points: 400, type: "open",
        question: "Audience engagement: Draw out what you think Beattyians spend their day doing after leaving school. The more popular choice among students wins the points.",
        answer: "Host awards points to the team with the more popular/convincing drawing."
      },
      { points: 300, type: "multi",
        question: "Which of the following are <i>not</i> games Gen Z would typically play? (Select all that apply)",
        choices: ["Twitch", "Minecraft", "Roblox", "Flappy Bird", "Mobile Legends", "Discord"],
        answerIdx: [0,5],
        answer: "<b>Twitch</b> and <b>Discord</b> are platforms, not games."
      },
      { points: 200, type: "mcq",
        question: "How do today‚Äôs teenagers use Instagram?",
        choices: [
          "Mainly Insta Stories with occasional posts",
          "Mainly Insta posts with occasional Stories",
          "About the same number of posts and Stories",
          "They don‚Äôt use Instagram as the minimum age is 18"
        ],
        answerIdx: [0],
        answer: "Typically <b>Stories</b> are used more frequently than feed posts."
      },
      { points: 100, type: "mcq",
        mediaUrl: "https://teacherjohann.github.io/games/Macs.png",
        mediaAlt: "McDonald's Toa Payoh Lorong 1 storefront",
        question: "Where is this McDonald's which is incredibly popular with students?",
        choices: ["HDB Hub", "Toa Payoh Central", "Toa Payoh Lorong 1", "SAFRA Toa Payoh"],
        answerIdx: [2],
        answer: "Commonly <b>Toa Payoh Lorong 1</b>."
      }
    ]
  },
  {
    category: "‚≠ê Beattyians‚Äô Bias: Who they stan for",
    questions: [
      { points: 400, type: "open",
        mediaUrl: "https://upload.wikimedia.org/wikipedia/commons/f/f6/Tralalero_Tralala.webp",
        mediaAlt: "Tralalero Tralala image",
        question: "What is the name of this?",
        answer: "<b>Tralalero Tralala</b>."
      },
      { points: 300, type: "multi",
        question: "Which of the following are <i>no longer in fashion</i>? (Select all that apply)",
        choices: ["Bell-bottom jeans", "Twerking", "Mannequin challenge", "Low-rise jeans", "Dabbing", "Fist-bumping"],
        answerIdx: [0,1,2,3,4,5],
        answer: "All of the listed trends are generally considered out of fashion today. (Accept other reasonable answers at host‚Äôs discretion.)"
      },
      { points: 200, type: "mcq",
        question: "Which of the following is <i>not</i> an actual K-pop group name?",
        choices: ["ITZY","ENHYPEN","(G)I-DLE","BABYMONSTER","KPOP demon hunters","All of the above","None of the above"],
        answerIdx: [4],
        answer: "<b>KPOP demon hunters</b> is not a real group; the others are real."
      },
      { points: 100, type: "mcq",
        question: "Which athlete does Gen Alpha love the most and use often in their lingo?",
        choices: ["LeBron James", "Michael Jordan", "Magic Johnson", "Kareem Abdul-Jabbar"],
        answerIdx: [1,0],
        answer: "Commonly <b>Michael Jordan</b> (the ‚ÄúGOAT‚Äù) is referenced; many also argue <b>LeBron James</b>. Accept either with justification."
      }
    ]
  }
];

const boardEl = document.getElementById('board');
const modalEl = document.getElementById('modal');
const mCat = document.getElementById('mCat');
const mPts = document.getElementById('mPts');
const mQ = document.getElementById('mQ');
const mMedia = document.getElementById('mMedia');
const mOptions = document.getElementById('mOptions');
const mAnswer = document.getElementById('mAnswer');
const btnShowAns = document.getElementById('btnShowAns');
const btnClose = document.getElementById('btnClose');
const btnA = document.getElementById('btnA');
const btnB = document.getElementById('btnB');
const btnBoth = document.getElementById('btnBoth');
const scoreAEl = document.getElementById('scoreA');
const scoreBEl = document.getElementById('scoreB');
const restartBtn = document.getElementById('restart');

let scoreA = 0, scoreB = 0;
const state = { used:{}, awarded:{} };
function keyFor(ci, qi){ return `c${ci}q${qi}`; }

/* Manual score editing */
function editScore(team){
  const current = team==='A' ? scoreA : scoreB;
  const raw = prompt(`Enter new score for Team ${team}:`, String(current));
  if(raw===null) return;
  const val = parseInt(raw.replace(/[^\d-]/g,''),10);
  if(isNaN(val)) return alert('Please enter a valid number.');
  if(team==='A'){ scoreA = val; scoreAEl.textContent = scoreA; }
  else { scoreB = val; scoreBEl.textContent = scoreB; }
}
scoreAEl.addEventListener('click', ()=>editScore('A'));
scoreBEl.addEventListener('click', ()=>editScore('B'));

function resetGame(){
  scoreA = 0; scoreB = 0;
  scoreAEl.textContent = '0'; scoreBEl.textContent = '0';
  for(const k of Object.keys(state.used)) delete state.used[k];
  for(const k of Object.keys(state.awarded)) delete state.awarded[k];
  boardEl.innerHTML = ''; buildBoard();
}

function buildBoard(){
  const sorted = gameData.map(cat => ({...cat, _sorted:[...cat.questions].sort((a,b)=>b.points - a.points)}));
  // headers
  sorted.forEach(c => {
    const h = document.createElement('div'); h.className = 'cat cats-row'; h.innerHTML = c.category; boardEl.appendChild(h);
  });
  // 4 rows, highest on top
  for(let row=0; row<4; row++){
    for(let ci=0; ci<sorted.length; ci++){
      const q = sorted[ci]._sorted[row];
      const qiOriginal = gameData[ci].questions.findIndex(qq => qq.points === q.points && qq.question === q.question);
      const cell = document.createElement('div'); cell.className = 'cell'; cell.textContent = q.points;
      const k = keyFor(ci, qiOriginal); if(state.used[k]) cell.classList.add('used');
      cell.addEventListener('click', () => openQuestion(ci, qiOriginal, cell)); boardEl.appendChild(cell);
    }
  }
}

function roman(idx){
  const list = ['i)','ii)','iii)','iv)','v)','vi)','vii)','viii)','ix)','x)'];
  return list[idx] || `${idx+1})`;
}

function openQuestion(ci, qi, cellEl){
  const cat = gameData[ci]; const q = cat.questions[qi];
  mCat.textContent = cat.category; mPts.textContent = q.points; mQ.innerHTML = q.question;
  mOptions.innerHTML = ''; mMedia.innerHTML=''; mAnswer.innerHTML = q.answer || '';

  if(q.mediaUrl){
    const img = document.createElement('img');
    img.src = q.mediaUrl;
    img.alt = q.mediaAlt || "Media";
    img.loading = "eager";
    mMedia.appendChild(img);
  }

  const k = keyFor(ci, qi); if(!state.awarded[k]) state.awarded[k] = {A:false, B:false};

  if(q.type === 'mcq' && Array.isArray(q.choices)){
    q.choices.forEach((choice, idx) => {
      const id = `opt-${ci}-${qi}-${idx}`;
      const wrap = document.createElement('div'); wrap.className = 'opt';
      const input = document.createElement('input'); input.type = 'radio'; input.name = `q${ci}-${qi}`; input.id = id;
      const lab = document.createElement('label'); lab.className='label'; lab.setAttribute('for', id);
      lab.innerHTML = `<b>${roman(idx)}</b> ${choice}`;
      wrap.appendChild(input); wrap.appendChild(lab); mOptions.appendChild(wrap);
    });
  } else if(q.type === 'multi' && Array.isArray(q.choices)){
    q.choices.forEach((choice, idx) => {
      const id = `chk-${ci}-${qi}-${idx}`;
      const wrap = document.createElement('div'); wrap.className = 'opt';
      const input = document.createElement('input'); input.type = 'checkbox'; input.id = id;
      const lab = document.createElement('label'); lab.className='label'; lab.setAttribute('for', id);
      lab.innerHTML = `<b>${roman(idx)}</b> ${choice}`;
      wrap.appendChild(input); wrap.appendChild(lab); mOptions.appendChild(wrap);
    });
  }

  // Reset + enable correct buttons for this question
  mAnswer.classList.remove('show'); btnShowAns.disabled = false;
  const awarded = state.awarded[k];
  btnA.disabled = awarded.A;
  btnB.disabled = awarded.B;
  btnBoth.disabled = awarded.A && awarded.B;

  btnShowAns.onclick = () => { mAnswer.classList.add('show'); btnShowAns.disabled = true; };
  btnClose.onclick   = () => { closeModal(); markUsed(ci, qi, cellEl); };

  // RESTORED scoring handlers
  btnA.onclick    = () => awardTeam('A', q.points, ci, qi);
  btnB.onclick    = () => awardTeam('B', q.points, ci, qi);
  btnBoth.onclick = () => { awardTeam('A', q.points, ci, qi); awardTeam('B', q.points, ci, qi); };

  modalEl.classList.add('show');

  // ESC-to-close only
  document.onkeydown = (e)=>{
    if(!modalEl.classList.contains('show')) return;
    if(e.key === 'Escape'){ btnClose.click(); }
  };
}

function closeModal(){ modalEl.classList.remove('show'); document.onkeydown = null; }

function markUsed(ci, qi, cellEl){
  const k = keyFor(ci, qi);
  state.used[k] = true;
  if(cellEl) cellEl.classList.add('used');
}

function awardTeam(team, pts, ci, qi){
  const k = keyFor(ci, qi);
  const aw = state.awarded[k];
  if(aw[team]) return;            // prevent double-award per team
  if(team === 'A'){ scoreA += pts; scoreAEl.textContent = scoreA; }
  if(team === 'B'){ scoreB += pts; scoreBEl.textContent = scoreB; }
  aw[team] = true;
  // refresh disabled states
  btnA.disabled = aw.A;
  btnB.disabled = aw.B;
  btnBoth.disabled = aw.A && aw.B;
}

restartBtn.addEventListener('click', ()=>{
  if(confirm("Restart the entire game? This will reset scores and reopen all questions.")) resetGame();
});

buildBoard();
modalEl.addEventListener('click', (e)=>{ if(e.target === modalEl){ btnClose.click(); }});
</script>
</body>
</html>
